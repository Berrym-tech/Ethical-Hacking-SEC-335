# Get the local computer's IP address and subnet mask
$networkAdapter = Get-NetAdapter | Where-Object { $_.Status -eq 'Up' -and $_.MediaType -ne 'Loopback' } | Select-Object -First 1
$ipConfig = Get-NetIPConfiguration -InterfaceAlias $networkAdapter.InterfaceAlias

# Ensure that an active network adapter is found
if ($ipConfig -eq $null) {
    Write-Host "No active network adapter found."
    exit
}

# Extract the network address and subnet mask
$ipAddress = $ipConfig.IPv4Address.IPAddress
$subnetMask = $ipConfig.IPv4DefaultGateway.PrefixLength

# Calculate the network address
$networkAddress = $ipAddress -band (-bnot (1 -shl (32 - $subnetMask)))

# Define the DNS server to use (you can change this as needed)
$dnsServer = "192.168.4.4"

# Loop through the range of IP addresses in the network
for ($octet = 1; $octet -le 254; $octet++) {
    $targetIP = "$networkAddress.$octet"
    
    # Use the DNS server to resolve the IP address
    $hostname = [System.Net.Dns]::GetHostEntry($targetIP).HostName
    
    # Output the result
    Write-Host "IP: $targetIP | Hostname: $hostname | DNS Server: $dnsServer"
}
